# ============================================================
# Kitty 终端配置
# 特性：高性能 + 远程控制 + 分屏管理
# ============================================================

# ===============================
# 主题（可选：1984-dark / 1984-orwellian）
# ===============================
include theme.conf

# ===============================
# 字体
# ===============================
font_family           JetBrainsMono Nerd Font
bold_font             auto
italic_font           auto
bold_italic_font      auto
font_size             12
adjust_line_height    105%
glyph_cache_size      4096

# ===============================
# 光标与外观
# ===============================
cursor_shape          beam
cursor_blink_interval 0
enable_audio_bell     no
command_on_bell       ~/.config/kitty/scripts/on-bell.sh
background_opacity    1.0
enable_window_decorations no
enable_kitty_graphics yes
enable_animations     no
background_image      none
max_fps               60

# ===============================
# 滚动与剪贴板
# ===============================
scrollback_lines      500
clipboard_control     write-clipboard read-clipboard
detect_urls           no
shell_integration     no-cursor no-title

# ===============================
# 性能优化
# ===============================
input_delay           3
repaint_delay         10
sync_to_monitor       yes

# ===============================
# 远程控制（配合 kitty @）
# ===============================
allow_remote_control  yes
listen_on             unix:@mykitty

# ===============================
# 标签栏
# ===============================
tab_bar_edge          top
tab_bar_min_tabs      1
tab_bar_style         powerline
tab_title_template    "{index}:{title}"
tab_bar_background    #1c1c1c
active_tab_background #00FF00
active_tab_foreground #1c1c1c
inactive_tab_background #333333
inactive_tab_foreground #888888

# ===============================
# 窗口布局
# ===============================
enabled_layouts       tall,stack,grid
window_border_width   1.0
window_margin_width   4
window_padding_width  4
draw_minimal_borders  no
inactive_text_alpha   1.0
hide_on_focus_loss    yes

# ===============================
# 安全设置
# ===============================
map alt+f4            no_op
confirm_os_window_close 0

# ===============================
# 快捷键
# ===============================
kitty_mod             ctrl+shift

# --- 新建窗口/标签 ---
map alt+n             new_os_window
map alt+enter         new_tab
map ctrl+enter        launch --cwd=current

# --- 关闭/全屏/布局 ---
map kitty_mod+w       close_window
map ctrl+alt+w        close_window
map kitty_mod+f       toggle_fullscreen
map kitty_mod+e       choose_layout
map cmd+shift+l       next_layout

# --- 窗口切换（Ctrl+方向键）---
map ctrl+left         neighboring_window left
map ctrl+right        neighboring_window right
map ctrl+up           neighboring_window up
map ctrl+down         neighboring_window down

# --- 窗口大小调整（Ctrl+Shift+方向键）---
map ctrl+shift+up     resize_window taller
map ctrl+shift+down   resize_window shorter
map ctrl+shift+left   resize_window narrower
map ctrl+shift+right  resize_window wider

# --- 标签切换（Alt+方向键）---
map alt+left          previous_tab
map alt+right         next_tab
map alt+up            move_tab_backward
map alt+down          move_tab_forward

# --- 字号调整 ---
map kitty_mod+equal   change_font_size all +1.0
map kitty_mod+minus   change_font_size all -1.0
map kitty_mod+backspace change_font_size all 0

# --- 剪贴板 ---
map kitty_mod+c       copy_to_clipboard
map kitty_mod+v       paste_from_clipboard

# ===============================
# 其他
# ===============================
mouse_hide_wait       0
